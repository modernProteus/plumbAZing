<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PlumbAZing | Your Aâ€“Z Plumbing Experts</title>
    <meta
      name="description"
      content="PlumbAZing â€” honest, reliable residential plumbing in Austin, TX. Call or text (512) 888-4406. Request service online at plumbazing.com."
    />

    <!-- Open Graph (iOS / iMessage / Facebook / etc.) -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://plumbazing.com/" />
    <meta
      property="og:title"
      content="PlumbAZing | Your Aâ€“Z Plumbing Experts"
    />
    <meta
      property="og:description"
      content="Honest, reliable residential plumbing in Austin. Call/text (512) 888-4406 or request service online."
    />
    <!-- IMPORTANT: absolute URL improves previews -->
    <meta
      property="og:image"
      content="https://plumbazing.com/PlumbAZing_logo.jpeg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="PlumbAZing | Your Aâ€“Z Plumbing Experts"
    />
    <meta
      name="twitter:description"
      content="Honest, reliable residential plumbing in Austin. Call/text (512) 888-4406 or request service online."
    />
    <meta
      name="twitter:image"
      content="https://plumbazing.com/PlumbAZing_logo.jpeg"
    />

    <link rel="icon" href="favicon-32.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />

    <style>
      :root {
        --blue: #0b3d91;
        --red: #c1121f;
        --ink: #0f172a;
        --muted: #475569;
        --bg: #ffffff;
        --card: #f8fafc;
        --line: #e2e8f0;
        --shadow: 0 10px 30px rgba(2, 8, 23, 0.08);
        --radius: 18px;
        --max: 1120px;
      }

      * {
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--ink);
        background: var(--bg);
        line-height: 1.45;
      }
      a {
        color: inherit;
      }
      .container {
        max-width: var(--max);
        margin: 0 auto;
        padding: 0 18px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 12px 16px;
        border-radius: 999px;
        border: 1px solid transparent;
        text-decoration: none;
        font-weight: 800;
        letter-spacing: 0.2px;
        transition: transform 0.08s ease, box-shadow 0.15s ease,
          background 0.15s ease;
        white-space: nowrap;
        cursor: pointer;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn.primary {
        background: var(--red);
        color: #fff;
        box-shadow: 0 10px 18px rgba(193, 18, 31, 0.18);
      }
      .btn.primary:hover {
        box-shadow: 0 14px 24px rgba(193, 18, 31, 0.22);
      }
      .btn.secondary {
        background: #fff;
        border-color: rgba(11, 61, 145, 0.25);
        color: var(--blue);
      }
      .btn.secondary:hover {
        background: rgba(11, 61, 145, 0.05);
      }

      .pill {
        display: inline-flex;
        gap: 10px;
        align-items: center;
        padding: 8px 12px;
        border-radius: 999px;
        background: rgba(11, 61, 145, 0.07);
        border: 1px solid rgba(11, 61, 145, 0.14);
        color: var(--blue);
        font-weight: 700;
        font-size: 14px;
      }

      .muted {
        color: var(--muted);
        font-weight: 650;
      }

      .topbar {
        position: sticky;
        top: 0;
        z-index: 50;
        background: rgba(255, 255, 255, 0.86);
        backdrop-filter: saturate(140%) blur(10px);
        border-bottom: 1px solid var(--line);
      }
      .topbar .row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 0;
        gap: 12px;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 180px;
        text-decoration: none;
      }
      .brand img {
        height: 44px;
        width: auto;
        display: block;
      }
      .nav-actions {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .hero {
        position: relative;
        overflow: hidden;
        padding: 42px 0 26px;
      }
      .hero::before {
        content: "";
        position: absolute;
        inset: -120px -100px auto -100px;
        height: 320px;
        background: radial-gradient(
            1200px 260px at 20% 30%,
            rgba(11, 61, 145, 0.14),
            transparent 60%
          ),
          radial-gradient(
            900px 240px at 80% 20%,
            rgba(193, 18, 31, 0.14),
            transparent 60%
          ),
          linear-gradient(
            90deg,
            rgba(11, 61, 145, 0.06),
            rgba(193, 18, 31, 0.06)
          );
        transform: skewY(-6deg);
        border-bottom: 1px solid rgba(2, 8, 23, 0.06);
      }
      .hero-grid {
        position: relative;
        display: grid;
        grid-template-columns: 1.3fr 0.7fr;
        gap: 22px;
        align-items: stretch;
      }
      .hero-card {
        background: #fff;
        border: 1px solid rgba(2, 8, 23, 0.08);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 22px;
      }
      .hero-header {
        display: flex;
        gap: 16px;
        align-items: center;
      }
      .hero-header img {
        width: 210px;
        max-width: 45vw;
        height: auto;
        display: block;
      }
      h1 {
        margin: 0 0 10px;
        font-size: clamp(30px, 3.3vw, 44px);
        line-height: 1.08;
        letter-spacing: -0.6px;
      }
      .subhead {
        margin: 10px 0 16px;
        color: var(--muted);
        font-size: clamp(15px, 1.55vw, 18px);
      }
      .cta-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        margin-top: 10px;
      }
      .trust-strip {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-top: 16px;
      }
      .trust {
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: 14px;
        padding: 12px;
        font-weight: 800;
        color: var(--ink);
      }
      .trust small {
        display: block;
        font-weight: 700;
        color: var(--muted);
        margin-top: 2px;
      }
      .side-card {
        background: linear-gradient(
          180deg,
          rgba(11, 61, 145, 0.06),
          rgba(193, 18, 31, 0.06)
        );
        border: 1px solid rgba(2, 8, 23, 0.08);
        border-radius: var(--radius);
        padding: 18px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 14px;
      }
      .offer {
        background: #fff;
        border: 1px solid rgba(193, 18, 31, 0.18);
        border-radius: 16px;
        padding: 14px;
      }
      .offer .big {
        font-size: 34px;
        font-weight: 950;
        letter-spacing: -0.8px;
        color: var(--red);
        line-height: 1;
        margin: 0;
      }
      .offer .text {
        margin: 6px 0 0;
        font-weight: 900;
      }
      .offer .fine {
        margin: 8px 0 0;
        color: var(--muted);
        font-size: 13px;
        font-weight: 700;
      }

      section {
        padding: 28px 0;
      }
      .section-title {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 12px;
      }
      h2 {
        margin: 0;
        font-size: clamp(22px, 2.1vw, 30px);
        letter-spacing: -0.4px;
      }
      .section-sub {
        margin: 0;
        color: var(--muted);
        font-weight: 650;
      }
      .grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }
      .card {
        background: #fff;
        border: 1px solid var(--line);
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: 0 8px 20px rgba(2, 8, 23, 0.05);
      }

      .services {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
        margin-top: 12px;
      }
      .svc {
        border: 1px solid var(--line);
        background: var(--card);
        border-radius: 14px;
        padding: 12px;
        font-weight: 850;
      }
      .svc span {
        color: var(--blue);
      }

      .banner {
        border-radius: var(--radius);
        padding: 18px;
        border: 1px solid rgba(193, 18, 31, 0.18);
        background: linear-gradient(
          90deg,
          rgba(193, 18, 31, 0.06),
          rgba(11, 61, 145, 0.06)
        );
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
      }
      .banner .left {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .banner .headline {
        font-size: 22px;
        font-weight: 950;
        letter-spacing: -0.4px;
        margin: 0;
      }
      .banner .note {
        margin: 0;
        color: var(--muted);
        font-weight: 650;
      }

      .how {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 12px;
        margin-top: 12px;
      }
      .step {
        background: #fff;
        border: 1px solid var(--line);
        border-radius: var(--radius);
        padding: 16px;
      }
      .step .num {
        width: 34px;
        height: 34px;
        border-radius: 12px;
        display: grid;
        place-items: center;
        font-weight: 950;
        color: #fff;
        background: var(--blue);
        box-shadow: 0 10px 18px rgba(11, 61, 145, 0.18);
        margin-bottom: 10px;
      }
      .step:nth-child(2) .num {
        background: var(--red);
        box-shadow: 0 10px 18px rgba(193, 18, 31, 0.18);
      }
      .step h3 {
        margin: 0 0 6px;
        font-size: 17px;
        letter-spacing: -0.2px;
      }
      .step p {
        margin: 0;
        color: var(--muted);
        font-weight: 650;
      }

      .form {
        display: grid;
        grid-template-columns: 1fr 0.9fr;
        gap: 14px;
        align-items: start;
      }
      form {
        display: grid;
        gap: 10px;
      }
      label {
        font-weight: 850;
        font-size: 14px;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 12px 12px;
        border-radius: 14px;
        border: 1px solid var(--line);
        background: #fff;
        font: inherit;
        outline: none;
      }
      input:focus,
      textarea:focus,
      select:focus {
        border-color: rgba(11, 61, 145, 0.45);
        box-shadow: 0 0 0 4px rgba(11, 61, 145, 0.1);
      }
      textarea {
        min-height: 120px;
        resize: vertical;
      }
      .split {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      .aside {
        position: sticky;
        top: 92px;
        border-radius: var(--radius);
        border: 1px solid var(--line);
        background: var(--card);
        padding: 16px;
      }

      footer {
        border-top: 1px solid var(--line);
        padding: 22px 0;
        color: var(--muted);
        font-weight: 650;
      }
      .footer-grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 14px;
        align-items: start;
      }
      .kicker {
        font-size: 13px;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: var(--muted);
        font-weight: 900;
      }
      .mini {
        font-size: 13px;
      }
      .badges {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 10px;
      }

      /* Honeypot field (hidden from humans) */
      .hp {
        position: absolute !important;
        left: -9999px !important;
        width: 1px !important;
        height: 1px !important;
        overflow: hidden !important;
      }

      @media (max-width: 920px) {
        .hero-grid {
          grid-template-columns: 1fr;
        }
        .form {
          grid-template-columns: 1fr;
        }
        .aside {
          position: relative;
          top: auto;
        }
      }
      @media (max-width: 640px) {
        .trust-strip {
          grid-template-columns: 1fr;
        }
        .services {
          grid-template-columns: 1fr;
        }
        .how {
          grid-template-columns: 1fr;
        }
        .split {
          grid-template-columns: 1fr;
        }
        .topbar {
          position: relative; /* no sticky on mobile */
        }
      }
    </style>
  </head>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17942862558"></script>
  <script>
  Â Â window.dataLayer = window.dataLayer || [];
  Â Â function gtag(){dataLayer.push(arguments);}
  Â Â gtag('js', new Date());
  
  Â Â gtag('config', 'AW-17942862558');
  </script>

  <body>
    <!-- Top Bar -->
    <header class="topbar" aria-label="Top bar">
      <div class="container">
        <div class="row">
          <a class="brand" href="#top" aria-label="PlumbAZing home">
            <img src="PlumbAZing_logo.svg" alt="PlumbAZing logo" />
          </a>
          <nav class="nav-actions" aria-label="Quick actions">
            <a class="btn secondary" href="#services">Services</a>
            <a class="btn secondary" href="#request">Request</a>
            <a class="btn primary" href="tel:+15128884406">
              Call/Text (512) 888-4406
            </a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <main id="top" class="hero">
      <div class="container">
        <div class="hero-grid">
          <div class="hero-card">
            <div class="hero-header">
              <img src="PlumbAZing_logo.svg" alt="PlumbAZing logo" />
              <div>
                <h1>Honest, Reliable Plumbing Service in Austin</h1>
                <p class="subhead">
                  Residential repairs, installs, and drain help. Fast response,
                  clean work, no runaround.
                  <strong style="color: var(--blue)">Free estimates</strong>
                  for most jobs.
                </p>
              </div>
            </div>

            <div class="cta-row">
              <a class="btn primary" href="#request">Request Service</a>
              <a class="btn secondary" href="#services">View Services</a>
              <a class="btn secondary" href="tel:+15128884406">Call Now</a>
            </div>

            <div class="trust-strip" aria-label="Trust signals">
              <div class="trust">
                Locally Owned
                <small>We treat your home like ours.</small>
              </div>
              <div class="trust">
                Free Estimates
                <small>For most common jobs.</small>
              </div>
              <div class="trust">
                Straightforward Service
                <small>Clear options. Clear pricing.</small>
              </div>
            </div>
          </div>

          <!-- Offer Banner -->
          <section aria-label="First time customer offer">
            <div class="container">
              <div class="banner">
                <div class="left">
                  <p class="headline">
                    New here? Get
                    <span style="color: var(--red)">$50 OFF</span>
                    your first service.
                  </p>
                  <p class="note">First-time customers â€¢ Expires: 12/31/26</p>
                </div>
                <div class="cta-row">
                  <a class="btn primary" href="#request">Request Service</a>
                  <a class="btn secondary" href="tel:+15128884406">Call Now</a>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Services -->
    <section id="services">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Plumbing Services</h2>
            <p class="section-sub">
              If it leaks, clogs, or wonâ€™t behaveâ€¦ we handle it.
            </p>
          </div>
          <a class="btn secondary" href="sms:+15128884406">Text us a photo</a>
        </div>

        <div class="card">
          <div
            id="servicesGrid"
            class="services"
            aria-label="Services list"
          ></div>
          <p
            class="mini"
            style="margin: 12px 0 0; color: var(--muted); font-weight: 650"
          >
            Not sure what it is? Call or text and weâ€™ll point you in the right
            direction.
          </p>
        </div>
      </div>
    </section>

    <!-- How it Works + About -->
    <section id="about">
      <div class="container">
        <div class="grid-2">
          <div class="card">
            <div class="section-title" style="margin-bottom: 8px">
              <div>
                <h2>Getting Help is Easy</h2>
                <p class="section-sub">Simple steps. No mystery scheduling.</p>
              </div>
            </div>

            <div class="how">
              <div class="step">
                <div class="num">1</div>
                <h3>Reach out</h3>
                <p>Call, text, or submit the request form below.</p>
              </div>
              <div class="step">
                <div class="num">2</div>
                <h3>We confirm</h3>
                <p>
                  Weâ€™ll clarify details and give you a clear arrival window.
                </p>
              </div>
              <div class="step">
                <div class="num">3</div>
                <h3>We fix it</h3>
                <p>Quality work, clean finish, and youâ€™re back to normal.</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="section-title" style="margin-bottom: 8px">
              <div>
                <h2>About PlumbAZing</h2>
                <p class="section-sub">
                  Local, reliable, and easy to work with.
                </p>
              </div>
            </div>

            <p style="margin: 0; color: var(--muted); font-weight: 650">
              PlumbAZing is a locally owned and operated plumbing company
              serving the Greater Austin area. Founded by experienced plumbers
              Josh and Alan, we spent years working for large plumbing companies
              before starting our own business.
              <br />
              <br />
              Our goal is simple: provide the same high level of service and
              professionalism youâ€™d expect from the big companies, without the
              inflated pricing and overhead. We specialize in residential and
              light commercial plumbing and take pride in honest work, clear
              communication, and reliable results.
            </p>

            <div class="badges" aria-label="Badges">
              <span class="pill">Locally Owned</span>
              <span class="pill">Free Estimates</span>
              <span class="pill">Call or Text</span>
              <span class="pill">
                <img width="50" src="lgbtqOwned.png" alt="LGBTQ Owned badge" />
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Request Service -->
    <section id="request">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Request Service</h2>
            <p class="section-sub">
              Tell us whatâ€™s going on. Weâ€™ll respond ASAP.
            </p>
          </div>
        </div>

        <div class="form">
          <div class="card">
            <form id="serviceForm" novalidate>
              <!-- Honeypot (bots fill hidden fields) -->
              <div class="hp" aria-hidden="true">
                <label for="company">Company</label>
                <input
                  id="company"
                  name="company"
                  autocomplete="off"
                  tabindex="-1"
                />
              </div>

              <div class="split">
                <div>
                  <label for="name">Name (required)</label>
                  <input
                    id="name"
                    name="name"
                    type="text"
                    autocomplete="name"
                    required
                  />
                </div>
                <div>
                  <label for="phone">Phone Number (required)</label>
                  <input
                    id="phone"
                    name="phone"
                    type="tel"
                    inputmode="tel"
                    autocomplete="tel"
                    required
                    placeholder="(512) 555-1234"
                  />
                </div>
              </div>

              <div class="split">
                <div>
                  <label for="email">Email Address (optional)</label>
                  <input
                    id="email"
                    name="email"
                    type="email"
                    autocomplete="email"
                  />
                </div>
                <div>
                  <label for="zipcode">Zipcode (required)</label>
                  <input
                    id="zipcode"
                    name="zipcode"
                    inputmode="numeric"
                    autocomplete="postal-code"
                    required
                    placeholder="78704"
                    maxlength="5"
                  />
                </div>
              </div>

              <div>
                <label for="streetAddress">Street Address (optional)</label>
                <input
                  id="streetAddress"
                  name="streetAddress"
                  autocomplete="street-address"
                  placeholder="123 Main St"
                />
              </div>

              <div class="split">
                <div>
                  <label for="preferredContactTime">
                    Preferred Contact Time
                  </label>
                  <select
                    id="preferredContactTime"
                    name="preferredContactTime"
                    required
                  >
                    <option value="" selected disabled>Selectâ€¦</option>
                    <option value="ASAP">ASAP</option>
                    <option value="Morning">Morning</option>
                    <option value="Afternoon">Afternoon</option>
                    <option value="Evening">Evening</option>
                  </select>
                </div>
                <div>
                  <label for="preferredContactMethod">
                    Preferred Contact Type
                  </label>
                  <select
                    id="preferredContactMethod"
                    name="preferredContactMethod"
                    required
                  >
                    <option value="" selected disabled>Selectâ€¦</option>
                    <option value="Call">Call</option>
                    <option value="Text">Text</option>
                    <option value="Email">Email</option>
                  </select>
                </div>
              </div>

              <div>
                <label for="serviceType">Service Type</label>
                <select id="serviceType" name="serviceType" required>
                  <option value="" selected disabled>Select a serviceâ€¦</option>
                </select>
              </div>

              <div>
                <label for="message">How can we help? (required)</label>
                <textarea
                  id="message"
                  name="message"
                  required
                  placeholder="Ex: kitchen sink backing up, dripping faucet, water heater not heatingâ€¦"
                ></textarea>
              </div>

              <div class="cta-row" style="justify-content: space-between">
                <button
                  id="submitBtn"
                  class="btn primary"
                  type="submit"
                  style="border: none"
                >
                  Send Request
                </button>
              </div>

              <p id="formStatus" class="muted" style="margin: 0"></p>
            </form>
          </div>

          <aside class="aside" aria-label="Need help fast">
            <div class="kicker">Need help now?</div>
            <p style="margin: 8px 0 0" class="mini">
              Call or text:
              <a
                href="tel:+15128884406"
                style="
                  color: var(--blue);
                  text-decoration: none;
                  font-weight: 900;
                "
              >
                (512) 888-4406
              </a>
            </p>
            <p style="margin: 10px 0 0" class="mini">
              For emergencies, pick
              <strong>ðŸš¨ Emergency plumbing</strong>
              as the Service Type.
            </p>
          </aside>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-grid">
          <div>
            <div class="kicker">PlumbAZing</div>
            <p style="margin: 8px 0 0">
              Honest, reliable residential plumbing in Austin, TX.
            </p>
          </div>
          <div>
            <div class="kicker">Business</div>
            <p style="margin: 8px 0 0" class="mini">
              Call/Text:
              <a
                href="tel:+15128884406"
                style="
                  color: var(--blue);
                  text-decoration: none;
                  font-weight: 900;
                "
              >
                (512) 888-4406
              </a>
              â€¢ Email:
              <span style="font-weight: 900; color: var(--ink)">
                service@plumbazing.com
              </span>
            </p>
            <p style="margin: 8px 0 0" class="mini">
              Biz ID:
              <strong>ML-44738</strong>
            </p>
          </div>
        </div>

        <p class="mini" style="margin: 14px 0 0">
          Â©
          <span id="y"></span>
          PlumbAZing. All rights reserved.
        </p>
      </div>
    </footer>

    <script>
      // =========================
      // CONFIG (Option B2)
      // =========================
      const PLUMBAZING_WEBAPP_URL =
        "https://script.google.com/macros/s/AKfycbxIKTBVp_nvMK8BHvwQItYwOQj_lJnC_Ll74eTx2Iva8pOHIRxsuXwRVfbDKk43sXLz8w/exec";

      // Must match SECRET in your Apps Script code.gs
      const PLUMBAZING_FORM_SECRET = "9X2kA0R7ZcTq1EoWb8m5JYH4F6nDLSVUpiPa";

      // Single source of truth (services list + dropdown)
      const SERVICES = [
        { value: "Leak Detection & Repair", label: "Leak detection & repair" },
        { value: "Drain Cleaning / Clogs", label: "Drain cleaning / clogs" },
        {
          value: "Toilet Repair & Installation",
          label: "Toilet repair & installation",
        },
        {
          value: "Faucet & Fixture Installs",
          label: "Faucet & fixture installs",
        },
        {
          value: "Garbage Disposal Repair/Install",
          label: "Garbage disposal repair/install",
        },
        {
          value: "Water Heater Repair/Install",
          label: "Water heater repair/install",
        },
        {
          value: "Shutoff Valves / Supply Lines",
          label: "Shutoff valves / supply lines",
        },
        {
          value: "Water Treatment & Conditioning",
          label: "Water treatment & conditioning",
        },
        {
          value: "Tankless Water Heater Specialist",
          label: "Tankless water heater specialist",
        },
        {
          value: "General Plumbing Repairs",
          label: "General plumbing repairs",
        },
        {
          value: "Light Commercial",
          label: "Light Commercial",
        },
        { value: "ðŸš¨Emergency Plumbing", label: "ðŸš¨ Emergency plumbing" },
      ];

      function isValidZip(zip) {
        return /^\d{5}$/.test(zip);
      }
      // TX ZIPs generally span 75001â€“79999 and 88501â€“88595, with Austin uniques 73301/73344
      function isTexasZip(zip) {
        const z = Number(zip);
        if (!Number.isFinite(z)) return false;
        if (zip === "73301" || zip === "73344") return true;
        if (z >= 75001 && z <= 79999) return true;
        if (z >= 88501 && z <= 88595) return true;
        return false;
      }

      function setStatus(msg, isError = false) {
        const el = document.getElementById("formStatus");
        if (!el) return;
        el.textContent = msg;
        el.style.color = isError ? "var(--red)" : "var(--muted)";
      }

      function buildMailAndTextBodies() {
        const form = document.getElementById("serviceForm");
        const get = (name) =>
          (form.querySelector(`[name="${name}"]`)?.value || "").trim();

        const name = get("name");
        const phone = get("phone");
        const email = get("email");
        const street = get("streetAddress");
        const zip = get("zipcode");
        const when = get("preferredContactTime");
        const how = get("preferredContactMethod");
        const svc = get("serviceType");
        const msg = get("message");

        const summaryLines = [
          "PlumbAZing service request:",
          name ? `Name: ${name}` : "",
          phone ? `Phone: ${phone}` : "",
          email ? `Email: ${email}` : "",
          street ? `Street: ${street}` : "",
          zip ? `Zip: ${zip}` : "",
          when ? `Preferred time: ${when}` : "",
          how ? `Preferred method: ${how}` : "",
          svc ? `Service: ${svc}` : "",
          "",
          "Message:",
          msg || "",
          "",
          "Sent from plumbazing.com",
        ].filter(Boolean);

        return {
          name,
          phone,
          email,
          subject: `Service Request â€” ${name || "Customer"} (${
            phone || "no phone"
          })`,
          body: summaryLines.join("\n"),
          smsBody: [
            "PlumbAZing request:",
            name || "",
            phone || "",
            zip ? `Zip: ${zip}` : "",
            svc ? `Service: ${svc}` : "",
            msg ? `Msg: ${msg}` : "",
          ]
            .filter(Boolean)
            .join("\n"),
        };
      }

      function openMailDraft() {
        const { name, phone, body, subject } = buildMailAndTextBodies();
        if (!name || !phone) {
          alert("Please include your name and phone.");
          return;
        }
        const to = "service@plumbazing.com";
        const mailto = `mailto:${encodeURIComponent(
          to
        )}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(
          body
        )}`;
        window.location.href = mailto;
      }

      function openTextDraft() {
        const { name, phone, smsBody } = buildMailAndTextBodies();
        if (!name || !phone) {
          alert("Please include your name and phone.");
          return;
        }
        const to = "15128884406"; // digits only
        const body = encodeURIComponent(smsBody);

        // iOS commonly supports sms:number&body= ; many Android clients use ?body=
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const sep = isIOS ? "&" : "?";
        window.location.href = `sms:${to}${sep}body=${body}`;
      }

      document.getElementById("y").textContent = new Date().getFullYear();

      document.addEventListener("DOMContentLoaded", () => {
        // Render services grid
        const servicesGrid = document.getElementById("servicesGrid");
        if (servicesGrid) {
          servicesGrid.innerHTML = SERVICES.map(
            (s) => `<div class="svc"><span>âœ“</span> ${s.label}</div>`
          ).join("");
        }

        // Populate dropdown
        const serviceSelect = document.getElementById("serviceType");
        if (serviceSelect) {
          SERVICES.forEach((s) => {
            const opt = document.createElement("option");
            opt.value = s.value;
            opt.textContent = s.value;
            serviceSelect.appendChild(opt);
          });
        }

        const form = document.getElementById("serviceForm");
        const submitBtn = document.getElementById("submitBtn");
        if (!form) return;

        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          setStatus("");

          const fd = new FormData(form);
          const data = Object.fromEntries(fd.entries());

          // Honeypot trip
          if (data.company && String(data.company).trim().length > 0) {
            form.reset();
            setStatus(
              "Thanks! We received your request. Weâ€™ll reach out shortly."
            );
            return;
          }

          const name = String(data.name || "").trim();
          const phone = String(data.phone || "").trim();
          const message = String(data.message || "").trim();
          const zipcode = String(data.zipcode || "").trim();

          if (!name || !phone || !message || !zipcode) {
            setStatus(
              "Please fill out Name, Phone, Zipcode, and a short message.",
              true
            );
            return;
          }
          if (!isValidZip(zipcode)) {
            setStatus("Zipcode must be 5 digits.", true);
            return;
          }
          if (!isTexasZip(zipcode)) {
            setStatus(
              "That ZIP code doesnâ€™t look like Texas. If youâ€™re in TX and this is a special case, please call/text us.",
              true
            );
            return;
          }
          if (
            !data.preferredContactTime ||
            !data.preferredContactMethod ||
            !data.serviceType
          ) {
            setStatus(
              "Please choose a contact time, contact method, and service type.",
              true
            );
            return;
          }

          const isEmergency = String(data.serviceType)
            .toLowerCase()
            .includes("emergency");

          const payload = {
            email: String(data.email || "").trim(),
            phone,
            name,
            streetAddress: String(data.streetAddress || "").trim(),
            zipcode,
            preferredContactTime: String(
              data.preferredContactTime || ""
            ).trim(),
            preferredContactMethod: String(
              data.preferredContactMethod || ""
            ).trim(),
            serviceType: String(data.serviceType || "").trim(),
            message,
            emergency: isEmergency ? "YES" : "NO",
            sourceUrl: window.location.href,
            secret: PLUMBAZING_FORM_SECRET,
          };

          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = "Sendingâ€¦";
          }

          try {
            // no-cors means we canâ€™t reliably read response; if the Sheet logs, it worked.
            await fetch(PLUMBAZING_WEBAPP_URL, {
              method: "POST",
              mode: "no-cors",
              headers: { "Content-Type": "text/plain;charset=utf-8" },
              body: JSON.stringify(payload),
            });

            form.reset();
            setStatus(
              "Thanks! We received your request. Weâ€™ll reach out shortly."
            );
          } catch (err) {
            console.error(err);
            setStatus("Network error â€” please call or text us.", true);
          } finally {
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.textContent = "Send Request";
            }
          }
        });
      });
    </script>
  </body>
</html>
